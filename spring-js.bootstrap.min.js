/*
 * spring-js.bootstrap.js
 * https://github.com/coronadoland
 * 
 * Copyright (c) 2011-2013 Jose Antonio Garcia
 * Released under the MIT license
 * https://raw.github.com/coronadoland/spring-js/master/LICENSE.txt
 *
 * Date: 2013-04-10
 * $Id:$
 */
!function(A){A(function(){var D=function(K){var I="";for(var H in K){var G=K[H];var F=typeof(G);if(G==null){}else{if(G["0"]&&typeof(G["0"])=="object"){I+=(I==""?"":",")+'"'+H+'":[';var J=true;for(var E=0;E<G.length;E++){I+=(J?"":",")+D(G[E]);J=false}I+="]"}else{if(F=="string"){I+=(I==""?"":",")+'"'+H+'":"'+G+'"'}else{if(F=="number"){I+=(I==""?"":",")+'"'+H+'":'+G}else{if(F=="object"&&G!==null){I+=(I==""?"":",")+'"'+H+'":'+D(G)}}}}}}return("{"+I+"}")};var B=function(G,E,F,I,H){if(I){return A.ajax({dataType:E,type:G,url:F+"/"+H})}else{var J="application/json;charset=utf8";return A.ajax({contentType:J,data:H?D(H):"{}",dataType:E,type:G,url:F})}};var C=function(G,F,E,H){A.when(B("POST",F,G.service.url,G.service.restful,E),G.panel.waiter()).then(function(I){if(G.service.property){H(I[0][G.service.property])}else{H(I[0])}}).fail(function(I,K,J){if(G.panel.fail){G.panel.fail(I,K,J)}}).always(G.panel.always)};jQuery.fn.formdatalink=function(F){var G;var E="data-property";this.each(function(){A(this).on("change",function(){var H=A(this);G=H.attr(E);v=H.val();if(F&&F.trigger){F.trigger(G,v)}})})};jQuery.fn.loader=function(G){var F=null;if(G.template){var E=G.template.id;F=E+"TPL";A("#"+E).template(F)}var I=this;this.on("LOAD",function(K,J){if(G.service){C(G,(G.template||G.then)?"json":"text",J,function(L){if(G.then){G.then(L)}else{if(G.template){I.trigger("LOADTEMPLATE",[L])}else{I.html("");I.append(L)}}})}else{if(G.template){A.tmpl(G.template.id,J).appendTo(I)}}});var H=false;this.on("LOADTEMPLATE",function(L,K){var J=function(){I.html("");I.append(A.tmpl(F,K));if(G.template.shower){G.template.shower(I)}H=true};if(G.template.remover&&H){A.when(G.template.remover(I)).then(J)}else{J()}})};jQuery.fn.load=function(E){this.trigger("LOAD",[E])};jQuery.fn.loadTemplate=function(E){this.trigger("LOADTEMPLATE",[E])}})}(window.jQuery);!function(A){A(function(){jQuery.fn.sidebar=function(B){var C=this;A.get(B.menu,function(F){C.append(F);if(B.href){var E=C.find("a[href="+B.href+"]");var D=E.closest("li");D.addClass("active")}})};jQuery.fn.loaderaction=function(B){this.loader(B);var C=this;this.find("a").on("click",function(D){if(B.input){C.trigger("LOAD",[B.input()])}else{C.trigger("LOAD")}})};jQuery.fn.bootstrapdatalink=function(E){var F;var B="data-id";var C="data-property";if(this.hasClass("btn-group")){var D=this.find("ul");F=D.attr(C);D.find("a").on("click",function(){var H=A(this);var G=H.closest("li");G.addClass("active");var I=G.attr(B);if(E&&E.trigger){E.trigger(F,I)}})}}})}(window.jQuery);